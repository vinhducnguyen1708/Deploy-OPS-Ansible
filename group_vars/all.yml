---
replicate_pass: 12345
replicate_user: repl

multisite_ip_list:
  - "{{ IPCON1_SITE1 }}"
  - "{{ IPCON2_SITE1 }}"
  - "{{ IPCON3_SITE1 }}"
### Openstack config Auth enviroment
openstack_auth:
  auth_url: "{{ keystone_protocol }}://{%- if enable_multisite | bool %}{{ IP_VIPSITE1 }}{% else %}{{ IP_VIP }}{% endif %}:{{ keystone_port }}/v3"
  username: "admin"
  password: "{{ admin_pass }}"
  project_name: "admin"
  domain_name: "Default"
  user_domain_name: "Default"

openstack_octavia_auth:
  auth_url: "{{ keystone_protocol }}://{%- if enable_multisite | bool %}{{ IP_VIPSITE1 }}{% else %}{{ IP_VIP }}{% endif %}:{{ keystone_port }}/v3"
  username: "octavia"
  password: "{{ octavia_pass }}"
  project_name: "service"
  domain_name: "Default"
  user_domain_name: "Default"


cafile_name: haproxy
openstack_cacert: "{% if enable_ssl | bool %}/etc/ssl/private/{{ cafile_name }}.pem{% else %}{% endif %}"
#### config docker
enable_docker_proxy: "yes"
IP_docker_proxy: 172.16.68.49
Port_docker_proxy: 3128

#### Openstack services
enable_openstack_core: "yes"
enable_keystone: "{{ enable_openstack_core | bool }}"
enable_glance: "{{ enable_openstack_core | bool }}"
enable_placement: "{{ enable_openstack_core | bool }}"
enable_nova: "{{ enable_openstack_core | bool }}"
enable_neutron: "{{ enable_openstack_core | bool }}"
enable_horizon: "{{ enable_openstack_core | bool }}"
enable_neutron_dvr: "yes"
enable_neutron_vlan: "no"

### Version Packages
mariadb_version: 10.3

keystone_port: 5000
ssh_port: 22 

### Create VMs
#### Selfservice network info:
selfservice_network_name: service_network
sub_selfservice_network_name: sub1_selfservice_network
selfservice_network_address: 192.168.178.0/24
selfservice_dns_nameservers: 8.8.8.8
selfservice_pool_start: 192.168.178.10
selfservice_pool_end: 192.168.178.200

#### Provider network info:
provider_network_name: provider_network
sub_provider_network_name: sub1_provider_network
provider_network_address: 192.168.30.0/24
provider_network_type: flat
provider_physical_network: physnet1
provider_dns_nameservers: 8.8.8.8
provider_pool_start: 192.168.30.240
provider_pool_end: 192.168.30.250

#### Router info:
router_name: Routeradmin

#### Flavor info:
flavor_name: tiny
flavor_ram: 1024
flavor_vcpus: 1
flavor_root_disk: 5


### Do not touch :(
###

#### SSL
#public_protocol: "{{ 'https' if enable_tls | bool else 'http' }}"
#internal_protocol: "{{ 'https' if enable_tls | bool else 'http' }}"
keystone_protocol: "{{ 'https' if enable_ssl | bool else 'http' }}"
keystone_url: "{{ keystone_protocol }}://{{ IP_VIP }}:{{ keystone_port }}/v3"


#### Token
token_expired_min: "{{ token_expiration_keystone * 60 | int }}"
token_expired_sec: "{{ token_expiration_keystone * 3600 | int }}"
number_keystone_node: "{{ groups['controller'] | length | int }}"
rotation_frequency: "{{ token_expired_sec | int  // number_keystone_node | int  }}"
max_active_keys: "{{ token_expired_sec | int  // rotation_frequency | int + 2  }}"
### IP setup var
##### ex: MGNT_IP's output will be "192.168.10.101"
MGNT_IP: "{{ hostvars[inventory_hostname]['ansible_' + MGNT_IF]['ipv4']['address'] }}"
DATA_IP: "{{ hostvars[inventory_hostname]['ansible_' + DATA_IF]['ipv4']['address'] }}"
EXTERNAL_IP: "{{ hostvars[inventory_hostname]['ansible_' + EXTERNAL_IF]['ipv4']['address'] }}"
#### MGNT NETWORK setup var
##### ex: MGNT_NETWORK's output will be "192.168.10.0"
MGNT_NETWORK: "{{  hostvars[inventory_hostname]['ansible_' + MGNT_IF]['ipv4']['network'] }}"
##### ex: MGNT_IPADD's output will be "192.168.10.0/255.255.255.0"
MGNT_IPADD: "{{ MGNT_NETWORK }}/{{ MGNT_NETMASK }}"
##### ex: MGNT_CIDR's output will be "192.168.10.0/24"
MGNT_CIDR: "{{ MGNT_IPADD | ipaddr('net') }}"
MGNT_NETMASK: "{{  hostvars[inventory_hostname]['ansible_' + MGNT_IF]['ipv4']['netmask'] }}" 
#### EXTERNAL NETWORK setup var
##### ex: EXTERNAL_NETMASK's output will be "255.255.255.0"
EXTERNAL_NETMASK: "{{  hostvars[inventory_hostname]['ansible_' + EXTERNAL_IF]['ipv4']['netmask'] }}"








## Services's port
ssh_port: 22
keystone_port: 5000
barbican_api_port: 9311
cinder_api_port: 8776
glance_api_port: 9292
heat_api_port: 8004
heat_api_cfn_port: 8000
neutron_server_port: 9696
nova_api_port: 8774
nova_metadata_port: 8775
octavia_api_port: 9876
placement_port: 8778